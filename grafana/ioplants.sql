PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE `migration_log` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `migration_id` TEXT NOT NULL
, `sql` TEXT NOT NULL
, `success` INTEGER NOT NULL
, `error` TEXT NOT NULL
, `timestamp` DATETIME NOT NULL
);
INSERT INTO "migration_log" VALUES(1,'create migration_log table','CREATE TABLE IF NOT EXISTS `migration_log` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `migration_id` TEXT NOT NULL
, `sql` TEXT NOT NULL
, `success` INTEGER NOT NULL
, `error` TEXT NOT NULL
, `timestamp` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(2,'create user table','CREATE TABLE IF NOT EXISTS `user` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `version` INTEGER NOT NULL
, `login` TEXT NOT NULL
, `email` TEXT NOT NULL
, `name` TEXT NULL
, `password` TEXT NULL
, `salt` TEXT NULL
, `rands` TEXT NULL
, `company` TEXT NULL
, `account_id` INTEGER NOT NULL
, `is_admin` INTEGER NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(3,'add unique index user.login','CREATE UNIQUE INDEX `UQE_user_login` ON `user` (`login`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(4,'add unique index user.email','CREATE UNIQUE INDEX `UQE_user_email` ON `user` (`email`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(5,'drop index UQE_user_login - v1','DROP INDEX `UQE_user_login`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(6,'drop index UQE_user_email - v1','DROP INDEX `UQE_user_email`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(7,'Rename table user to user_v1 - v1','ALTER TABLE `user` RENAME TO `user_v1`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(8,'create user table v2','CREATE TABLE IF NOT EXISTS `user` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `version` INTEGER NOT NULL
, `login` TEXT NOT NULL
, `email` TEXT NOT NULL
, `name` TEXT NULL
, `password` TEXT NULL
, `salt` TEXT NULL
, `rands` TEXT NULL
, `company` TEXT NULL
, `org_id` INTEGER NOT NULL
, `is_admin` INTEGER NOT NULL
, `email_verified` INTEGER NULL
, `theme` TEXT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(9,'create index UQE_user_login - v2','CREATE UNIQUE INDEX `UQE_user_login` ON `user` (`login`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(10,'create index UQE_user_email - v2','CREATE UNIQUE INDEX `UQE_user_email` ON `user` (`email`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(11,'copy data_source v1 to v2','INSERT INTO `user` (`name`
, `password`
, `salt`
, `company`
, `is_admin`
, `created`
, `id`
, `login`
, `updated`
, `version`
, `org_id`
, `email`
, `rands`) SELECT `name`
, `password`
, `salt`
, `company`
, `is_admin`
, `created`
, `id`
, `login`
, `updated`
, `version`
, `account_id`
, `email`
, `rands` FROM `user_v1`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(12,'Drop old table user_v1','DROP TABLE IF EXISTS `user_v1`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(13,'Add column help_flags1 to user table','alter table `user` ADD COLUMN `help_flags1` INTEGER NOT NULL DEFAULT 0 ',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(14,'Update user table charset','-- NOT REQUIRED',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(15,'create temp user table v1-7','CREATE TABLE IF NOT EXISTS `temp_user` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `org_id` INTEGER NOT NULL
, `version` INTEGER NOT NULL
, `email` TEXT NOT NULL
, `name` TEXT NULL
, `role` TEXT NULL
, `code` TEXT NOT NULL
, `status` TEXT NOT NULL
, `invited_by_user_id` INTEGER NULL
, `email_sent` INTEGER NOT NULL
, `email_sent_on` DATETIME NULL
, `remote_addr` TEXT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(16,'create index IDX_temp_user_email - v1-7','CREATE INDEX `IDX_temp_user_email` ON `temp_user` (`email`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(17,'create index IDX_temp_user_org_id - v1-7','CREATE INDEX `IDX_temp_user_org_id` ON `temp_user` (`org_id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(18,'create index IDX_temp_user_code - v1-7','CREATE INDEX `IDX_temp_user_code` ON `temp_user` (`code`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(19,'create index IDX_temp_user_status - v1-7','CREATE INDEX `IDX_temp_user_status` ON `temp_user` (`status`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(20,'Update temp_user table charset','-- NOT REQUIRED',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(21,'create star table','CREATE TABLE IF NOT EXISTS `star` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `user_id` INTEGER NOT NULL
, `dashboard_id` INTEGER NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(22,'add unique index star.user_id_dashboard_id','CREATE UNIQUE INDEX `UQE_star_user_id_dashboard_id` ON `star` (`user_id`,`dashboard_id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(23,'create org table v1','CREATE TABLE IF NOT EXISTS `org` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `version` INTEGER NOT NULL
, `name` TEXT NOT NULL
, `address1` TEXT NULL
, `address2` TEXT NULL
, `city` TEXT NULL
, `state` TEXT NULL
, `zip_code` TEXT NULL
, `country` TEXT NULL
, `billing_email` TEXT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(24,'create index UQE_org_name - v1','CREATE UNIQUE INDEX `UQE_org_name` ON `org` (`name`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(25,'create org_user table v1','CREATE TABLE IF NOT EXISTS `org_user` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `org_id` INTEGER NOT NULL
, `user_id` INTEGER NOT NULL
, `role` TEXT NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(26,'create index IDX_org_user_org_id - v1','CREATE INDEX `IDX_org_user_org_id` ON `org_user` (`org_id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(27,'create index UQE_org_user_org_id_user_id - v1','CREATE UNIQUE INDEX `UQE_org_user_org_id_user_id` ON `org_user` (`org_id`,`user_id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(28,'Drop old table account','DROP TABLE IF EXISTS `account`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(29,'Drop old table account_user','DROP TABLE IF EXISTS `account_user`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(30,'Update org table charset','-- NOT REQUIRED',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(31,'Update org_user table charset','-- NOT REQUIRED',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(32,'create dashboard table','CREATE TABLE IF NOT EXISTS `dashboard` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `version` INTEGER NOT NULL
, `slug` TEXT NOT NULL
, `title` TEXT NOT NULL
, `data` TEXT NOT NULL
, `account_id` INTEGER NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(33,'add index dashboard.account_id','CREATE INDEX `IDX_dashboard_account_id` ON `dashboard` (`account_id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(34,'add unique index dashboard_account_id_slug','CREATE UNIQUE INDEX `UQE_dashboard_account_id_slug` ON `dashboard` (`account_id`,`slug`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(35,'create dashboard_tag table','CREATE TABLE IF NOT EXISTS `dashboard_tag` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `dashboard_id` INTEGER NOT NULL
, `term` TEXT NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(36,'add unique index dashboard_tag.dasboard_id_term','CREATE UNIQUE INDEX `UQE_dashboard_tag_dashboard_id_term` ON `dashboard_tag` (`dashboard_id`,`term`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(37,'drop index UQE_dashboard_tag_dashboard_id_term - v1','DROP INDEX `UQE_dashboard_tag_dashboard_id_term`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(38,'Rename table dashboard to dashboard_v1 - v1','ALTER TABLE `dashboard` RENAME TO `dashboard_v1`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(39,'create dashboard v2','CREATE TABLE IF NOT EXISTS `dashboard` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `version` INTEGER NOT NULL
, `slug` TEXT NOT NULL
, `title` TEXT NOT NULL
, `data` TEXT NOT NULL
, `org_id` INTEGER NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(40,'create index IDX_dashboard_org_id - v2','CREATE INDEX `IDX_dashboard_org_id` ON `dashboard` (`org_id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(41,'create index UQE_dashboard_org_id_slug - v2','CREATE UNIQUE INDEX `UQE_dashboard_org_id_slug` ON `dashboard` (`org_id`,`slug`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(42,'copy dashboard v1 to v2','INSERT INTO `dashboard` (`id`
, `version`
, `title`
, `org_id`
, `slug`
, `data`
, `created`
, `updated`) SELECT `id`
, `version`
, `title`
, `account_id`
, `slug`
, `data`
, `created`
, `updated` FROM `dashboard_v1`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(43,'drop table dashboard_v1','DROP TABLE IF EXISTS `dashboard_v1`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(44,'alter dashboard.data to mediumtext v1','SELECT 0 WHERE 0;',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(45,'Add column updated_by in dashboard - v2','alter table `dashboard` ADD COLUMN `updated_by` INTEGER NULL ',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(46,'Add column created_by in dashboard - v2','alter table `dashboard` ADD COLUMN `created_by` INTEGER NULL ',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(47,'Add column gnetId in dashboard','alter table `dashboard` ADD COLUMN `gnet_id` INTEGER NULL ',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(48,'Add index for gnetId in dashboard','CREATE INDEX `IDX_dashboard_gnet_id` ON `dashboard` (`gnet_id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(49,'Add column plugin_id in dashboard','alter table `dashboard` ADD COLUMN `plugin_id` TEXT NULL ',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(50,'Add index for plugin_id in dashboard','CREATE INDEX `IDX_dashboard_org_id_plugin_id` ON `dashboard` (`org_id`,`plugin_id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(51,'Add index for dashboard_id in dashboard_tag','CREATE INDEX `IDX_dashboard_tag_dashboard_id` ON `dashboard_tag` (`dashboard_id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(52,'Update dashboard table charset','-- NOT REQUIRED',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(53,'Update dashboard_tag table charset','-- NOT REQUIRED',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(54,'create data_source table','CREATE TABLE IF NOT EXISTS `data_source` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `account_id` INTEGER NOT NULL
, `version` INTEGER NOT NULL
, `type` TEXT NOT NULL
, `name` TEXT NOT NULL
, `access` TEXT NOT NULL
, `url` TEXT NOT NULL
, `password` TEXT NULL
, `user` TEXT NULL
, `database` TEXT NULL
, `basic_auth` INTEGER NOT NULL
, `basic_auth_user` TEXT NULL
, `basic_auth_password` TEXT NULL
, `is_default` INTEGER NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(55,'add index data_source.account_id','CREATE INDEX `IDX_data_source_account_id` ON `data_source` (`account_id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(56,'add unique index data_source.account_id_name','CREATE UNIQUE INDEX `UQE_data_source_account_id_name` ON `data_source` (`account_id`,`name`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(57,'drop index IDX_data_source_account_id - v1','DROP INDEX `IDX_data_source_account_id`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(58,'drop index UQE_data_source_account_id_name - v1','DROP INDEX `UQE_data_source_account_id_name`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(59,'Rename table data_source to data_source_v1 - v1','ALTER TABLE `data_source` RENAME TO `data_source_v1`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(60,'create data_source table v2','CREATE TABLE IF NOT EXISTS `data_source` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `org_id` INTEGER NOT NULL
, `version` INTEGER NOT NULL
, `type` TEXT NOT NULL
, `name` TEXT NOT NULL
, `access` TEXT NOT NULL
, `url` TEXT NOT NULL
, `password` TEXT NULL
, `user` TEXT NULL
, `database` TEXT NULL
, `basic_auth` INTEGER NOT NULL
, `basic_auth_user` TEXT NULL
, `basic_auth_password` TEXT NULL
, `is_default` INTEGER NOT NULL
, `json_data` TEXT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(61,'create index IDX_data_source_org_id - v2','CREATE INDEX `IDX_data_source_org_id` ON `data_source` (`org_id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(62,'create index UQE_data_source_org_id_name - v2','CREATE UNIQUE INDEX `UQE_data_source_org_id_name` ON `data_source` (`org_id`,`name`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(63,'copy data_source v1 to v2','INSERT INTO `data_source` (`version`
, `type`
, `user`
, `basic_auth_user`
, `basic_auth_password`
, `updated`
, `org_id`
, `password`
, `database`
, `basic_auth`
, `created`
, `name`
, `access`
, `url`
, `id`
, `is_default`) SELECT `version`
, `type`
, `user`
, `basic_auth_user`
, `basic_auth_password`
, `updated`
, `account_id`
, `password`
, `database`
, `basic_auth`
, `created`
, `name`
, `access`
, `url`
, `id`
, `is_default` FROM `data_source_v1`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(64,'Drop old table data_source_v1 #2','DROP TABLE IF EXISTS `data_source_v1`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(65,'Add column with_credentials','alter table `data_source` ADD COLUMN `with_credentials` INTEGER NOT NULL DEFAULT 0 ',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(66,'Add secure json data column','alter table `data_source` ADD COLUMN `secure_json_data` TEXT NULL ',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(67,'Update data_source table charset','-- NOT REQUIRED',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(68,'create api_key table','CREATE TABLE IF NOT EXISTS `api_key` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `account_id` INTEGER NOT NULL
, `name` TEXT NOT NULL
, `key` TEXT NOT NULL
, `role` TEXT NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(69,'add index api_key.account_id','CREATE INDEX `IDX_api_key_account_id` ON `api_key` (`account_id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(70,'add index api_key.key','CREATE UNIQUE INDEX `UQE_api_key_key` ON `api_key` (`key`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(71,'add index api_key.account_id_name','CREATE UNIQUE INDEX `UQE_api_key_account_id_name` ON `api_key` (`account_id`,`name`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(72,'drop index IDX_api_key_account_id - v1','DROP INDEX `IDX_api_key_account_id`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(73,'drop index UQE_api_key_key - v1','DROP INDEX `UQE_api_key_key`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(74,'drop index UQE_api_key_account_id_name - v1','DROP INDEX `UQE_api_key_account_id_name`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(75,'Rename table api_key to api_key_v1 - v1','ALTER TABLE `api_key` RENAME TO `api_key_v1`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(76,'create api_key table v2','CREATE TABLE IF NOT EXISTS `api_key` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `org_id` INTEGER NOT NULL
, `name` TEXT NOT NULL
, `key` TEXT NOT NULL
, `role` TEXT NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(77,'create index IDX_api_key_org_id - v2','CREATE INDEX `IDX_api_key_org_id` ON `api_key` (`org_id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(78,'create index UQE_api_key_key - v2','CREATE UNIQUE INDEX `UQE_api_key_key` ON `api_key` (`key`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(79,'create index UQE_api_key_org_id_name - v2','CREATE UNIQUE INDEX `UQE_api_key_org_id_name` ON `api_key` (`org_id`,`name`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(80,'copy api_key v1 to v2','INSERT INTO `api_key` (`updated`
, `id`
, `org_id`
, `name`
, `key`
, `role`
, `created`) SELECT `updated`
, `id`
, `account_id`
, `name`
, `key`
, `role`
, `created` FROM `api_key_v1`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(81,'Drop old table api_key_v1','DROP TABLE IF EXISTS `api_key_v1`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(82,'Update api_key table charset','-- NOT REQUIRED',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(83,'create dashboard_snapshot table v4','CREATE TABLE IF NOT EXISTS `dashboard_snapshot` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `name` TEXT NOT NULL
, `key` TEXT NOT NULL
, `dashboard` TEXT NOT NULL
, `expires` DATETIME NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(84,'drop table dashboard_snapshot_v4 #1','DROP TABLE IF EXISTS `dashboard_snapshot`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(85,'create dashboard_snapshot table v5 #2','CREATE TABLE IF NOT EXISTS `dashboard_snapshot` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `name` TEXT NOT NULL
, `key` TEXT NOT NULL
, `delete_key` TEXT NOT NULL
, `org_id` INTEGER NOT NULL
, `user_id` INTEGER NOT NULL
, `external` INTEGER NOT NULL
, `external_url` TEXT NOT NULL
, `dashboard` TEXT NOT NULL
, `expires` DATETIME NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(86,'create index UQE_dashboard_snapshot_key - v5','CREATE UNIQUE INDEX `UQE_dashboard_snapshot_key` ON `dashboard_snapshot` (`key`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(87,'create index UQE_dashboard_snapshot_delete_key - v5','CREATE UNIQUE INDEX `UQE_dashboard_snapshot_delete_key` ON `dashboard_snapshot` (`delete_key`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(88,'create index IDX_dashboard_snapshot_user_id - v5','CREATE INDEX `IDX_dashboard_snapshot_user_id` ON `dashboard_snapshot` (`user_id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(89,'alter dashboard_snapshot to mediumtext v2','SELECT 0 WHERE 0;',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(90,'Update dashboard_snapshot table charset','-- NOT REQUIRED',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(91,'create quota table v1','CREATE TABLE IF NOT EXISTS `quota` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `org_id` INTEGER NULL
, `user_id` INTEGER NULL
, `target` TEXT NOT NULL
, `limit` INTEGER NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(92,'create index UQE_quota_org_id_user_id_target - v1','CREATE UNIQUE INDEX `UQE_quota_org_id_user_id_target` ON `quota` (`org_id`,`user_id`,`target`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(93,'Update quota table charset','-- NOT REQUIRED',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(94,'create plugin_setting table','CREATE TABLE IF NOT EXISTS `plugin_setting` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `org_id` INTEGER NULL
, `plugin_id` TEXT NOT NULL
, `enabled` INTEGER NOT NULL
, `pinned` INTEGER NOT NULL
, `json_data` TEXT NULL
, `secure_json_data` TEXT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(95,'create index UQE_plugin_setting_org_id_plugin_id - v1','CREATE UNIQUE INDEX `UQE_plugin_setting_org_id_plugin_id` ON `plugin_setting` (`org_id`,`plugin_id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(96,'Add column plugin_version to plugin_settings','alter table `plugin_setting` ADD COLUMN `plugin_version` TEXT NULL ',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(97,'Update plugin_setting table charset','-- NOT REQUIRED',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(98,'create session table','CREATE TABLE IF NOT EXISTS `session` (
`key` TEXT PRIMARY KEY NOT NULL
, `data` BLOB NOT NULL
, `expiry` INTEGER NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(99,'Drop old table playlist table','DROP TABLE IF EXISTS `playlist`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(100,'Drop old table playlist_item table','DROP TABLE IF EXISTS `playlist_item`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(101,'create playlist table v2','CREATE TABLE IF NOT EXISTS `playlist` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `name` TEXT NOT NULL
, `interval` TEXT NOT NULL
, `org_id` INTEGER NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(102,'create playlist item table v2','CREATE TABLE IF NOT EXISTS `playlist_item` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `playlist_id` INTEGER NOT NULL
, `type` TEXT NOT NULL
, `value` TEXT NOT NULL
, `title` TEXT NOT NULL
, `order` INTEGER NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(103,'Update playlist table charset','-- NOT REQUIRED',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(104,'Update playlist_item table charset','-- NOT REQUIRED',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(105,'drop preferences table v2','DROP TABLE IF EXISTS `preferences`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(106,'drop preferences table v3','DROP TABLE IF EXISTS `preferences`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(107,'create preferences table v3','CREATE TABLE IF NOT EXISTS `preferences` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `org_id` INTEGER NOT NULL
, `user_id` INTEGER NOT NULL
, `version` INTEGER NOT NULL
, `home_dashboard_id` INTEGER NOT NULL
, `timezone` TEXT NOT NULL
, `theme` TEXT NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(108,'Update preferences table charset','-- NOT REQUIRED',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(109,'create alert table v1','CREATE TABLE IF NOT EXISTS `alert` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `version` INTEGER NOT NULL
, `dashboard_id` INTEGER NOT NULL
, `panel_id` INTEGER NOT NULL
, `org_id` INTEGER NOT NULL
, `name` TEXT NOT NULL
, `message` TEXT NOT NULL
, `state` TEXT NOT NULL
, `settings` TEXT NOT NULL
, `frequency` INTEGER NOT NULL
, `handler` INTEGER NOT NULL
, `severity` TEXT NOT NULL
, `silenced` INTEGER NOT NULL
, `execution_error` TEXT NOT NULL
, `eval_data` TEXT NULL
, `eval_date` DATETIME NULL
, `new_state_date` DATETIME NOT NULL
, `state_changes` INTEGER NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(110,'add index alert org_id & id ','CREATE INDEX `IDX_alert_org_id_id` ON `alert` (`org_id`,`id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(111,'add index alert state','CREATE INDEX `IDX_alert_state` ON `alert` (`state`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(112,'add index alert dashboard_id','CREATE INDEX `IDX_alert_dashboard_id` ON `alert` (`dashboard_id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(113,'create alert_notification table v1','CREATE TABLE IF NOT EXISTS `alert_notification` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `org_id` INTEGER NOT NULL
, `name` TEXT NOT NULL
, `type` TEXT NOT NULL
, `settings` TEXT NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(114,'Add column is_default','alter table `alert_notification` ADD COLUMN `is_default` INTEGER NOT NULL DEFAULT 0 ',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(115,'add index alert_notification org_id & name','CREATE UNIQUE INDEX `UQE_alert_notification_org_id_name` ON `alert_notification` (`org_id`,`name`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(116,'Update alert table charset','-- NOT REQUIRED',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(117,'Update alert_notification table charset','-- NOT REQUIRED',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(118,'Drop old annotation table v4','DROP TABLE IF EXISTS `annotation`',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(119,'create annotation table v5','CREATE TABLE IF NOT EXISTS `annotation` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `org_id` INTEGER NOT NULL
, `alert_id` INTEGER NULL
, `user_id` INTEGER NULL
, `dashboard_id` INTEGER NULL
, `panel_id` INTEGER NULL
, `category_id` INTEGER NULL
, `type` TEXT NOT NULL
, `title` TEXT NOT NULL
, `text` TEXT NOT NULL
, `metric` TEXT NULL
, `prev_state` TEXT NOT NULL
, `new_state` TEXT NOT NULL
, `data` TEXT NOT NULL
, `epoch` INTEGER NOT NULL
);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(120,'add index annotation 0 v3','CREATE INDEX `IDX_annotation_org_id_alert_id` ON `annotation` (`org_id`,`alert_id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(121,'add index annotation 1 v3','CREATE INDEX `IDX_annotation_org_id_type` ON `annotation` (`org_id`,`type`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(122,'add index annotation 2 v3','CREATE INDEX `IDX_annotation_org_id_category_id` ON `annotation` (`org_id`,`category_id`);',1,'','2017-05-26 18:50:07');
INSERT INTO "migration_log" VALUES(123,'add index annotation 3 v3','CREATE INDEX `IDX_annotation_org_id_dashboard_id_panel_id_epoch` ON `annotation` (`org_id`,`dashboard_id`,`panel_id`,`epoch`);',1,'','2017-05-26 18:50:08');
INSERT INTO "migration_log" VALUES(124,'add index annotation 4 v3','CREATE INDEX `IDX_annotation_org_id_epoch` ON `annotation` (`org_id`,`epoch`);',1,'','2017-05-26 18:50:08');
INSERT INTO "migration_log" VALUES(125,'Update annotation table charset','-- NOT REQUIRED',1,'','2017-05-26 18:50:08');
INSERT INTO "migration_log" VALUES(126,'Add column region_id to annotation table','alter table `annotation` ADD COLUMN `region_id` INTEGER NULL DEFAULT 0 ',1,'','2017-05-26 18:50:08');
INSERT INTO "migration_log" VALUES(127,'create test_data table','CREATE TABLE IF NOT EXISTS `test_data` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `metric1` TEXT NULL
, `metric2` TEXT NULL
, `value_big_int` INTEGER NULL
, `value_double` REAL NULL
, `value_float` REAL NULL
, `value_int` INTEGER NULL
, `time_epoch` INTEGER NOT NULL
, `time_date_time` DATETIME NOT NULL
, `time_time_stamp` DATETIME NOT NULL
);',1,'','2017-05-26 18:50:08');
CREATE TABLE `user` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `version` INTEGER NOT NULL
, `login` TEXT NOT NULL
, `email` TEXT NOT NULL
, `name` TEXT NULL
, `password` TEXT NULL
, `salt` TEXT NULL
, `rands` TEXT NULL
, `company` TEXT NULL
, `org_id` INTEGER NOT NULL
, `is_admin` INTEGER NOT NULL
, `email_verified` INTEGER NULL
, `theme` TEXT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
, `help_flags1` INTEGER NOT NULL DEFAULT 0);
INSERT INTO "user" VALUES(1,0,'admin','admin@localhost','','c38a76cb2390a3174da23536d0551e85e6af17544ffa17508cc49b2992119f4cf7ee123a445a472945656a75b1d8cc2b3531','HQrPc0XY3D','qLlmAleFLU','',1,1,0,'','2017-05-26 18:50:08','2017-05-26 18:50:08',0);
CREATE TABLE `temp_user` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `org_id` INTEGER NOT NULL
, `version` INTEGER NOT NULL
, `email` TEXT NOT NULL
, `name` TEXT NULL
, `role` TEXT NULL
, `code` TEXT NOT NULL
, `status` TEXT NOT NULL
, `invited_by_user_id` INTEGER NULL
, `email_sent` INTEGER NOT NULL
, `email_sent_on` DATETIME NULL
, `remote_addr` TEXT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);
CREATE TABLE `star` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `user_id` INTEGER NOT NULL
, `dashboard_id` INTEGER NOT NULL
);
CREATE TABLE `org` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `version` INTEGER NOT NULL
, `name` TEXT NOT NULL
, `address1` TEXT NULL
, `address2` TEXT NULL
, `city` TEXT NULL
, `state` TEXT NULL
, `zip_code` TEXT NULL
, `country` TEXT NULL
, `billing_email` TEXT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);
INSERT INTO "org" VALUES(1,0,'Main Org.','','','','','','',NULL,'2017-05-26 18:50:08','2017-05-26 18:50:08');
CREATE TABLE `org_user` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `org_id` INTEGER NOT NULL
, `user_id` INTEGER NOT NULL
, `role` TEXT NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);
INSERT INTO "org_user" VALUES(1,1,1,'Admin','2017-05-26 18:50:08','2017-05-26 18:50:08');
CREATE TABLE `dashboard_tag` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `dashboard_id` INTEGER NOT NULL
, `term` TEXT NOT NULL
);
CREATE TABLE `dashboard` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `version` INTEGER NOT NULL
, `slug` TEXT NOT NULL
, `title` TEXT NOT NULL
, `data` TEXT NOT NULL
, `org_id` INTEGER NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
, `updated_by` INTEGER NULL, `created_by` INTEGER NULL, `gnet_id` INTEGER NULL, `plugin_id` TEXT NULL);
INSERT INTO "dashboard" VALUES(2,7,'internet-of-plants','Internet of Plants',X'7B22616E6E6F746174696F6E73223A7B226C697374223A5B5D7D2C226564697461626C65223A747275652C22676E65744964223A6E756C6C2C226772617068546F6F6C746970223A302C2268696465436F6E74726F6C73223A66616C73652C226964223A322C226C696E6B73223A5B5D2C2272656672657368223A223573222C22726F7773223A5B7B22636F6C6C61707365223A66616C73652C22686569676874223A3235332C2270616E656C73223A5B7B22616C696173436F6C6F7273223A7B7D2C2262617273223A66616C73652C22646173684C656E677468223A31302C22646173686573223A66616C73652C2264617461736F75726365223A6E756C6C2C2266696C6C223A312C226964223A322C226C6567656E64223A7B22617667223A66616C73652C2263757272656E74223A66616C73652C226D6178223A66616C73652C226D696E223A66616C73652C2273686F77223A747275652C22746F74616C223A66616C73652C2276616C756573223A66616C73657D2C226C696E6573223A747275652C226C696E657769647468223A312C226C696E6B73223A5B5D2C226E756C6C506F696E744D6F6465223A226E756C6C222C2270657263656E74616765223A66616C73652C22706F696E74726164697573223A352C22706F696E7473223A66616C73652C2272656E6465726572223A22666C6F74222C227365726965734F7665727269646573223A5B5D2C2273706163654C656E677468223A31302C227370616E223A362C22737461636B223A66616C73652C22737465707065644C696E65223A66616C73652C2274617267657473223A5B7B22647354797065223A22696E666C75786462222C2267726F75704279223A5B7B22706172616D73223A5B22245F5F696E74657276616C225D2C2274797065223A2274696D65227D2C7B22706172616D73223A5B226964225D2C2274797065223A22746167227D2C7B22706172616D73223A5B226E756C6C225D2C2274797065223A2266696C6C227D5D2C226D6561737572656D656E74223A22726164696F5F64617461222C226F72646572427954696D65223A22415343222C22706F6C696379223A2264656661756C74222C227265664964223A2241222C22726573756C74466F726D6174223A2274696D655F736572696573222C2273656C656374223A5B5B7B22706172616D73223A5B2261697268756D225D2C2274797065223A226669656C64227D2C7B22706172616D73223A5B5D2C2274797065223A226D65616E227D5D5D2C2274616773223A5B5D7D5D2C227468726573686F6C6473223A5B5D2C2274696D6546726F6D223A6E756C6C2C2274696D655368696674223A6E756C6C2C227469746C65223A2248756D656461642064656C2041697265222C22746F6F6C746970223A7B22736861726564223A747275652C22736F7274223A302C2276616C75655F74797065223A22696E646976696475616C227D2C2274797065223A226772617068222C227861786973223A7B226275636B657473223A6E756C6C2C226D6F6465223A2274696D65222C226E616D65223A6E756C6C2C2273686F77223A747275652C2276616C756573223A5B5D7D2C227961786573223A5B7B22666F726D6174223A2273686F7274222C226C6162656C223A6E756C6C2C226C6F6742617365223A312C226D6178223A6E756C6C2C226D696E223A6E756C6C2C2273686F77223A747275657D2C7B22666F726D6174223A2273686F7274222C226C6162656C223A6E756C6C2C226C6F6742617365223A312C226D6178223A6E756C6C2C226D696E223A6E756C6C2C2273686F77223A747275657D5D7D2C7B22616C696173436F6C6F7273223A7B7D2C2262617273223A66616C73652C22646173684C656E677468223A31302C22646173686573223A66616C73652C2264617461736F75726365223A6E756C6C2C2266696C6C223A312C226964223A332C226C6567656E64223A7B22617667223A66616C73652C2263757272656E74223A66616C73652C226D6178223A66616C73652C226D696E223A66616C73652C2273686F77223A747275652C22746F74616C223A66616C73652C2276616C756573223A66616C73657D2C226C696E6573223A747275652C226C696E657769647468223A312C226C696E6B73223A5B5D2C226E756C6C506F696E744D6F6465223A226E756C6C222C2270657263656E74616765223A66616C73652C22706F696E74726164697573223A352C22706F696E7473223A66616C73652C2272656E6465726572223A22666C6F74222C227365726965734F7665727269646573223A5B5D2C2273706163654C656E677468223A31302C227370616E223A362C22737461636B223A66616C73652C22737465707065644C696E65223A66616C73652C2274617267657473223A5B7B22647354797065223A22696E666C75786462222C2267726F75704279223A5B7B22706172616D73223A5B22245F5F696E74657276616C225D2C2274797065223A2274696D65227D2C7B22706172616D73223A5B226964225D2C2274797065223A22746167227D2C7B22706172616D73223A5B226E756C6C225D2C2274797065223A2266696C6C227D5D2C226D6561737572656D656E74223A22726164696F5F64617461222C226F72646572427954696D65223A22415343222C22706F6C696379223A2264656661756C74222C227265664964223A2241222C22726573756C74466F726D6174223A2274696D655F736572696573222C2273656C656374223A5B5B7B22706172616D73223A5B226C69676874225D2C2274797065223A226669656C64227D2C7B22706172616D73223A5B5D2C2274797065223A226D65616E227D5D5D2C2274616773223A5B5D7D5D2C227468726573686F6C6473223A5B5D2C2274696D6546726F6D223A6E756C6C2C2274696D655368696674223A6E756C6C2C227469746C65223A224C757A222C22746F6F6C746970223A7B22736861726564223A747275652C22736F7274223A302C2276616C75655F74797065223A22696E646976696475616C227D2C2274797065223A226772617068222C227861786973223A7B226275636B657473223A6E756C6C2C226D6F6465223A2274696D65222C226E616D65223A6E756C6C2C2273686F77223A747275652C2276616C756573223A5B5D7D2C227961786573223A5B7B22666F726D6174223A2273686F7274222C226C6162656C223A6E756C6C2C226C6F6742617365223A312C226D6178223A6E756C6C2C226D696E223A6E756C6C2C2273686F77223A747275657D2C7B22666F726D6174223A2273686F7274222C226C6162656C223A6E756C6C2C226C6F6742617365223A312C226D6178223A6E756C6C2C226D696E223A6E756C6C2C2273686F77223A747275657D5D7D5D2C22726570656174223A6E756C6C2C22726570656174497465726174696F6E223A6E756C6C2C22726570656174526F774964223A6E756C6C2C2273686F775469746C65223A66616C73652C227469746C65223A2244617368626F61726420526F77222C227469746C6553697A65223A226836227D2C7B22636F6C6C61707365223A66616C73652C22686569676874223A3235302C2270616E656C73223A5B7B22616C696173436F6C6F7273223A7B7D2C2262617273223A66616C73652C22646173684C656E677468223A31302C22646173686573223A66616C73652C2264617461736F75726365223A6E756C6C2C2266696C6C223A312C226964223A342C226C6567656E64223A7B22617667223A66616C73652C2263757272656E74223A66616C73652C226D6178223A66616C73652C226D696E223A66616C73652C2273686F77223A747275652C22746F74616C223A66616C73652C2276616C756573223A66616C73657D2C226C696E6573223A747275652C226C696E657769647468223A312C226C696E6B73223A5B5D2C226E756C6C506F696E744D6F6465223A226E756C6C222C2270657263656E74616765223A66616C73652C22706F696E74726164697573223A352C22706F696E7473223A66616C73652C2272656E6465726572223A22666C6F74222C227365726965734F7665727269646573223A5B5D2C2273706163654C656E677468223A31302C227370616E223A362C22737461636B223A66616C73652C22737465707065644C696E65223A66616C73652C2274617267657473223A5B7B22647354797065223A22696E666C75786462222C2267726F75704279223A5B7B22706172616D73223A5B22245F5F696E74657276616C225D2C2274797065223A2274696D65227D2C7B22706172616D73223A5B226964225D2C2274797065223A22746167227D2C7B22706172616D73223A5B226E756C6C225D2C2274797065223A2266696C6C227D5D2C226D6561737572656D656E74223A22726164696F5F64617461222C226F72646572427954696D65223A22415343222C22706F6C696379223A2264656661756C74222C227265664964223A2241222C22726573756C74466F726D6174223A2274696D655F736572696573222C2273656C656374223A5B5B7B22706172616D73223A5B22736F696C68756D225D2C2274797065223A226669656C64227D2C7B22706172616D73223A5B5D2C2274797065223A226D65616E227D5D5D2C2274616773223A5B5D7D5D2C227468726573686F6C6473223A5B5D2C2274696D6546726F6D223A6E756C6C2C2274696D655368696674223A6E756C6C2C227469746C65223A2248756D6564616420646520546965727261222C22746F6F6C746970223A7B22736861726564223A747275652C22736F7274223A302C2276616C75655F74797065223A22696E646976696475616C227D2C2274797065223A226772617068222C227861786973223A7B226275636B657473223A6E756C6C2C226D6F6465223A2274696D65222C226E616D65223A6E756C6C2C2273686F77223A747275652C2276616C756573223A5B5D7D2C227961786573223A5B7B22666F726D6174223A2273686F7274222C226C6162656C223A6E756C6C2C226C6F6742617365223A312C226D6178223A6E756C6C2C226D696E223A6E756C6C2C2273686F77223A747275657D2C7B22666F726D6174223A2273686F7274222C226C6162656C223A6E756C6C2C226C6F6742617365223A312C226D6178223A6E756C6C2C226D696E223A6E756C6C2C2273686F77223A747275657D5D7D2C7B22616C696173436F6C6F7273223A7B7D2C2262617273223A66616C73652C22646173684C656E677468223A31302C22646173686573223A66616C73652C2264617461736F75726365223A6E756C6C2C2266696C6C223A312C226964223A352C226C6567656E64223A7B22617667223A66616C73652C2263757272656E74223A66616C73652C226D6178223A66616C73652C226D696E223A66616C73652C2273686F77223A747275652C22746F74616C223A66616C73652C2276616C756573223A66616C73657D2C226C696E6573223A747275652C226C696E657769647468223A312C226C696E6B73223A5B5D2C226E756C6C506F696E744D6F6465223A226E756C6C222C2270657263656E74616765223A66616C73652C22706F696E74726164697573223A352C22706F696E7473223A66616C73652C2272656E6465726572223A22666C6F74222C227365726965734F7665727269646573223A5B5D2C2273706163654C656E677468223A31302C227370616E223A362C22737461636B223A66616C73652C22737465707065644C696E65223A66616C73652C2274617267657473223A5B7B22647354797065223A22696E666C75786462222C2267726F75704279223A5B7B22706172616D73223A5B22245F5F696E74657276616C225D2C2274797065223A2274696D65227D2C7B22706172616D73223A5B226964225D2C2274797065223A22746167227D2C7B22706172616D73223A5B226E756C6C225D2C2274797065223A2266696C6C227D5D2C226D6561737572656D656E74223A22726164696F5F64617461222C226F72646572427954696D65223A22415343222C22706F6C696379223A2264656661756C74222C227265664964223A2241222C22726573756C74466F726D6174223A2274696D655F736572696573222C2273656C656374223A5B5B7B22706172616D73223A5B2274656D70225D2C2274797065223A226669656C64227D2C7B22706172616D73223A5B5D2C2274797065223A226D65616E227D5D5D2C2274616773223A5B5D7D5D2C227468726573686F6C6473223A5B5D2C2274696D6546726F6D223A6E756C6C2C2274696D655368696674223A6E756C6C2C227469746C65223A2254656D7065726174757261222C22746F6F6C746970223A7B22736861726564223A747275652C22736F7274223A302C2276616C75655F74797065223A22696E646976696475616C227D2C2274797065223A226772617068222C227861786973223A7B226275636B657473223A6E756C6C2C226D6F6465223A2274696D65222C226E616D65223A6E756C6C2C2273686F77223A747275652C2276616C756573223A5B5D7D2C227961786573223A5B7B22666F726D6174223A2273686F7274222C226C6162656C223A6E756C6C2C226C6F6742617365223A312C226D6178223A6E756C6C2C226D696E223A6E756C6C2C2273686F77223A747275657D2C7B22666F726D6174223A2273686F7274222C226C6162656C223A6E756C6C2C226C6F6742617365223A312C226D6178223A6E756C6C2C226D696E223A6E756C6C2C2273686F77223A747275657D5D7D5D2C22726570656174223A6E756C6C2C22726570656174497465726174696F6E223A6E756C6C2C22726570656174526F774964223A6E756C6C2C2273686F775469746C65223A66616C73652C227469746C65223A2244617368626F61726420526F77222C227469746C6553697A65223A226836227D5D2C22736368656D6156657273696F6E223A31342C227374796C65223A226461726B222C2274616773223A5B5D2C2274656D706C6174696E67223A7B226C697374223A5B5D7D2C2274696D65223A7B2266726F6D223A226E6F772D3168222C22746F223A226E6F77227D2C2274696D657069636B6572223A7B22726566726573685F696E74657276616C73223A5B223573222C22313073222C22333073222C22316D222C22356D222C2231356D222C2233306D222C223168222C223268222C223164225D2C2274696D655F6F7074696F6E73223A5B22356D222C2231356D222C223168222C223668222C22313268222C22323468222C223264222C223764222C22333064225D7D2C2274696D657A6F6E65223A2262726F77736572222C227469746C65223A22496E7465726E6574206F6620506C616E7473222C2276657273696F6E223A377D',1,'2017-05-29 16:01:37','2017-05-29 16:06:32',1,1,0,'');
CREATE TABLE `data_source` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `org_id` INTEGER NOT NULL
, `version` INTEGER NOT NULL
, `type` TEXT NOT NULL
, `name` TEXT NOT NULL
, `access` TEXT NOT NULL
, `url` TEXT NOT NULL
, `password` TEXT NULL
, `user` TEXT NULL
, `database` TEXT NULL
, `basic_auth` INTEGER NOT NULL
, `basic_auth_user` TEXT NULL
, `basic_auth_password` TEXT NULL
, `is_default` INTEGER NOT NULL
, `json_data` TEXT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
, `with_credentials` INTEGER NOT NULL DEFAULT 0, `secure_json_data` TEXT NULL);
INSERT INTO "data_source" VALUES(1,1,0,'influxdb','influxdb','proxy','http://influxdb:8086','root','root','iop',0,'','',1,'{}','2017-05-26 21:35:18','2017-05-26 21:35:18',0,'{}');
CREATE TABLE `api_key` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `org_id` INTEGER NOT NULL
, `name` TEXT NOT NULL
, `key` TEXT NOT NULL
, `role` TEXT NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);
CREATE TABLE `dashboard_snapshot` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `name` TEXT NOT NULL
, `key` TEXT NOT NULL
, `delete_key` TEXT NOT NULL
, `org_id` INTEGER NOT NULL
, `user_id` INTEGER NOT NULL
, `external` INTEGER NOT NULL
, `external_url` TEXT NOT NULL
, `dashboard` TEXT NOT NULL
, `expires` DATETIME NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);
CREATE TABLE `quota` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `org_id` INTEGER NULL
, `user_id` INTEGER NULL
, `target` TEXT NOT NULL
, `limit` INTEGER NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);
CREATE TABLE `plugin_setting` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `org_id` INTEGER NULL
, `plugin_id` TEXT NOT NULL
, `enabled` INTEGER NOT NULL
, `pinned` INTEGER NOT NULL
, `json_data` TEXT NULL
, `secure_json_data` TEXT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
, `plugin_version` TEXT NULL);
CREATE TABLE `session` (
`key` TEXT PRIMARY KEY NOT NULL
, `data` BLOB NOT NULL
, `expiry` INTEGER NOT NULL
);
CREATE TABLE `playlist` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `name` TEXT NOT NULL
, `interval` TEXT NOT NULL
, `org_id` INTEGER NOT NULL
);
CREATE TABLE `playlist_item` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `playlist_id` INTEGER NOT NULL
, `type` TEXT NOT NULL
, `value` TEXT NOT NULL
, `title` TEXT NOT NULL
, `order` INTEGER NOT NULL
);
CREATE TABLE `preferences` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `org_id` INTEGER NOT NULL
, `user_id` INTEGER NOT NULL
, `version` INTEGER NOT NULL
, `home_dashboard_id` INTEGER NOT NULL
, `timezone` TEXT NOT NULL
, `theme` TEXT NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);
CREATE TABLE `alert` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `version` INTEGER NOT NULL
, `dashboard_id` INTEGER NOT NULL
, `panel_id` INTEGER NOT NULL
, `org_id` INTEGER NOT NULL
, `name` TEXT NOT NULL
, `message` TEXT NOT NULL
, `state` TEXT NOT NULL
, `settings` TEXT NOT NULL
, `frequency` INTEGER NOT NULL
, `handler` INTEGER NOT NULL
, `severity` TEXT NOT NULL
, `silenced` INTEGER NOT NULL
, `execution_error` TEXT NOT NULL
, `eval_data` TEXT NULL
, `eval_date` DATETIME NULL
, `new_state_date` DATETIME NOT NULL
, `state_changes` INTEGER NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
);
CREATE TABLE `alert_notification` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `org_id` INTEGER NOT NULL
, `name` TEXT NOT NULL
, `type` TEXT NOT NULL
, `settings` TEXT NOT NULL
, `created` DATETIME NOT NULL
, `updated` DATETIME NOT NULL
, `is_default` INTEGER NOT NULL DEFAULT 0);
CREATE TABLE `annotation` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `org_id` INTEGER NOT NULL
, `alert_id` INTEGER NULL
, `user_id` INTEGER NULL
, `dashboard_id` INTEGER NULL
, `panel_id` INTEGER NULL
, `category_id` INTEGER NULL
, `type` TEXT NOT NULL
, `title` TEXT NOT NULL
, `text` TEXT NOT NULL
, `metric` TEXT NULL
, `prev_state` TEXT NOT NULL
, `new_state` TEXT NOT NULL
, `data` TEXT NOT NULL
, `epoch` INTEGER NOT NULL
, `region_id` INTEGER NULL DEFAULT 0);
CREATE TABLE `test_data` (
`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL
, `metric1` TEXT NULL
, `metric2` TEXT NULL
, `value_big_int` INTEGER NULL
, `value_double` REAL NULL
, `value_float` REAL NULL
, `value_int` INTEGER NULL
, `time_epoch` INTEGER NOT NULL
, `time_date_time` DATETIME NOT NULL
, `time_time_stamp` DATETIME NOT NULL
);
DELETE FROM sqlite_sequence;
INSERT INTO "sqlite_sequence" VALUES('migration_log',127);
INSERT INTO "sqlite_sequence" VALUES('user',1);
INSERT INTO "sqlite_sequence" VALUES('dashboard',2);
INSERT INTO "sqlite_sequence" VALUES('data_source',1);
INSERT INTO "sqlite_sequence" VALUES('api_key',0);
INSERT INTO "sqlite_sequence" VALUES('org',1);
INSERT INTO "sqlite_sequence" VALUES('org_user',1);
CREATE UNIQUE INDEX `UQE_user_login` ON `user` (`login`);
CREATE UNIQUE INDEX `UQE_user_email` ON `user` (`email`);
CREATE INDEX `IDX_temp_user_email` ON `temp_user` (`email`);
CREATE INDEX `IDX_temp_user_org_id` ON `temp_user` (`org_id`);
CREATE INDEX `IDX_temp_user_code` ON `temp_user` (`code`);
CREATE INDEX `IDX_temp_user_status` ON `temp_user` (`status`);
CREATE UNIQUE INDEX `UQE_star_user_id_dashboard_id` ON `star` (`user_id`,`dashboard_id`);
CREATE UNIQUE INDEX `UQE_org_name` ON `org` (`name`);
CREATE INDEX `IDX_org_user_org_id` ON `org_user` (`org_id`);
CREATE UNIQUE INDEX `UQE_org_user_org_id_user_id` ON `org_user` (`org_id`,`user_id`);
CREATE INDEX `IDX_dashboard_org_id` ON `dashboard` (`org_id`);
CREATE UNIQUE INDEX `UQE_dashboard_org_id_slug` ON `dashboard` (`org_id`,`slug`);
CREATE INDEX `IDX_dashboard_gnet_id` ON `dashboard` (`gnet_id`);
CREATE INDEX `IDX_dashboard_org_id_plugin_id` ON `dashboard` (`org_id`,`plugin_id`);
CREATE INDEX `IDX_dashboard_tag_dashboard_id` ON `dashboard_tag` (`dashboard_id`);
CREATE INDEX `IDX_data_source_org_id` ON `data_source` (`org_id`);
CREATE UNIQUE INDEX `UQE_data_source_org_id_name` ON `data_source` (`org_id`,`name`);
CREATE INDEX `IDX_api_key_org_id` ON `api_key` (`org_id`);
CREATE UNIQUE INDEX `UQE_api_key_key` ON `api_key` (`key`);
CREATE UNIQUE INDEX `UQE_api_key_org_id_name` ON `api_key` (`org_id`,`name`);
CREATE UNIQUE INDEX `UQE_dashboard_snapshot_key` ON `dashboard_snapshot` (`key`);
CREATE UNIQUE INDEX `UQE_dashboard_snapshot_delete_key` ON `dashboard_snapshot` (`delete_key`);
CREATE INDEX `IDX_dashboard_snapshot_user_id` ON `dashboard_snapshot` (`user_id`);
CREATE UNIQUE INDEX `UQE_quota_org_id_user_id_target` ON `quota` (`org_id`,`user_id`,`target`);
CREATE UNIQUE INDEX `UQE_plugin_setting_org_id_plugin_id` ON `plugin_setting` (`org_id`,`plugin_id`);
CREATE INDEX `IDX_alert_org_id_id` ON `alert` (`org_id`,`id`);
CREATE INDEX `IDX_alert_state` ON `alert` (`state`);
CREATE INDEX `IDX_alert_dashboard_id` ON `alert` (`dashboard_id`);
CREATE UNIQUE INDEX `UQE_alert_notification_org_id_name` ON `alert_notification` (`org_id`,`name`);
CREATE INDEX `IDX_annotation_org_id_alert_id` ON `annotation` (`org_id`,`alert_id`);
CREATE INDEX `IDX_annotation_org_id_type` ON `annotation` (`org_id`,`type`);
CREATE INDEX `IDX_annotation_org_id_category_id` ON `annotation` (`org_id`,`category_id`);
CREATE INDEX `IDX_annotation_org_id_dashboard_id_panel_id_epoch` ON `annotation` (`org_id`,`dashboard_id`,`panel_id`,`epoch`);
CREATE INDEX `IDX_annotation_org_id_epoch` ON `annotation` (`org_id`,`epoch`);
COMMIT;
